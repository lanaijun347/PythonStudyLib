
    车型ID：a104

    模拟：协议模拟-->a104

;******************************************************************************************************************************************************

    通讯线: $~06$~14$~500k

进入命令:

  $~  REQ000:781 02 10 01 00 00 00 00 00       $~  ANS000:789 02 10 01 00 00 00 00 00

空闲命令:

  $!  REQ000:781 02 3E 01 00 00 00 00 00       $!  ANS000:789 02 3E 01 00 00 00 00 00

退出命令:



;******************************************************************************************************************************************************

读取故障码:

  $#  REQ000:781 05 18 00 FF FF FF 00 00       $#  ANS000:789 05 18 00 FF FF FF 00 00

  ANS000.BYTE02 控制故障码个数，从$#ANS000.BYTE3$#开始每$#4$#个字节表示一个故障码，前$#2$#表示码号。

  码库:

  $*$*DTC/feff0000_2BYTE


<RDTC>
  <FUNCTION type="0" num="0">
     <param type="string" value="1"/>
   </FUNCTION>
</RDTC>

;******************************************************************************************************************************************************

清除故障码:

  $$  REQ000:781 04 14 FF FF FF 00 00 00       $$  ANS000:789 04 14 FF FF FF 00 00 00

;******************************************************************************************************************************************************

版本信息:

  $%  REQ000:781 03 22 00 01 00 00 00 00       $%  ANS000:789 03 22 00 01 00 00 00 00
  $%  REQ001:781 03 22 00 03 00 00 00 00       $%  ANS001:789 03 22 00 03 00 00 00 00

  $%  000:硬件版本:        $%    $%  ANS000.BYTE004  $%  y=SPRINTF([%d.%d.%d],x1,x2,x3);
  $%  001:软件版本:        $%    $%  ANS001.BYTE004  $%  y=SPRINTF([%d.%d.%d],x1,x2,x3);

;******************************************************************************************************************************************************

读数据流: 

  $  REQ000:781 03 22 00 04 00 00 00 00       $  ANS000:789 03 22 00 04 00 00 00 00
  $  REQ001:781 03 22 00 05 00 00 00 00       $  ANS001:789 03 22 00 05 00 00 00 00
  $  REQ002:781 03 22 00 06 00 00 00 00       $  ANS002:789 03 22 00 06 00 00 00 00
  $  REQ003:781 03 22 00 07 00 00 00 00       $  ANS003:789 03 22 00 07 00 00 00 00
  $  REQ004:781 03 22 00 08 00 00 00 00       $  ANS004:789 03 22 00 08 00 00 00 00
  $  REQ005:781 03 22 00 0A 00 00 00 00       $  ANS005:789 03 22 00 0A 00 00 00 00
  $  REQ006:781 03 22 00 0B 00 00 00 00       $  ANS006:789 03 22 00 0B 00 00 00 00
  $  REQ007:781 03 22 00 0C 00 00 00 00       $  ANS007:789 03 22 00 0C 00 00 00 00
  $  REQ008:781 03 22 00 0D 00 00 00 00       $  ANS008:789 03 22 00 0D 00 00 00 00
  $  REQ009:781 03 22 00 0E 00 00 00 00       $  ANS009:789 03 22 00 0E 00 00 00 00
  $  REQ010:781 03 22 00 0F 00 00 00 00       $  ANS010:789 03 22 00 0F 00 00 00 00
  $  REQ011:781 03 22 00 10 00 00 00 00       $  ANS011:789 03 22 00 10 00 00 00 00
  $  REQ012:781 03 22 00 11 00 00 00 00       $  ANS012:789 03 22 00 11 00 00 00 00
  $  REQ013:781 03 22 00 12 00 00 00 00       $  ANS013:789 03 22 00 12 00 00 00 00
  $  REQ014:781 03 22 00 13 00 00 00 00       $  ANS014:789 03 22 00 13 00 00 00 00
  $  REQ015:781 03 22 00 14 00 00 00 00       $  ANS015:789 03 22 00 14 00 00 00 00
  $  REQ016:781 03 22 00 15 00 00 00 00       $  ANS016:789 03 22 00 15 00 00 00 00
  $  REQ017:781 03 22 00 16 00 00 00 00       $  ANS017:789 03 22 00 16 00 00 00 00
  $  REQ018:781 03 22 00 17 00 00 00 00       $  ANS018:789 03 22 00 17 00 00 00 00
  $  REQ019:781 03 22 00 18 00 00 00 00       $  ANS019:789 03 22 00 18 00 00 00 00
  $  REQ020:781 03 22 00 19 00 00 00 00       $  ANS020:789 03 22 00 19 00 00 00 00
  $  REQ021:781 03 22 00 1A 00 00 00 00       $  ANS021:789 03 22 00 1A 00 00 00 00
  $  REQ022:781 03 22 00 1B 00 00 00 00       $  ANS022:789 03 22 00 1B 00 00 00 00
  $  REQ023:781 03 22 00 1C 00 00 00 00       $  ANS023:789 03 22 00 1C 00 00 00 00
  $  REQ024:781 03 22 00 1D 00 00 00 00       $  ANS024:789 03 22 00 1D 00 00 00 00
  $  REQ025:781 03 22 00 1E 00 00 00 00       $  ANS025:789 03 22 00 1E 00 00 00 00
  $  REQ026:781 03 22 00 1F 00 00 00 00       $  ANS026:789 03 22 00 1F 00 00 00 00

  $  000:电池组当前总电压       $    $  V            $    $  ANS000.BYTE004  $  if(x2==0x00) y=x1; else if((x2==0x01) && (x1<0xF4)) y=x1+256; else y=@00d6;
  $  001:电池组当前总电流       $    $  A            $    $  ANS001.BYTE004  $  if(x2<0x27) y=x2*25.6+x1/10.0-500.0; else if((x2==0x28) && (x1<0x10)) y=x2*25.6+x1/10.0-500.0; else y=@00d6;
  $  002:电池的健康指数         $    $  %            $    $  ANS002.BYTE004  $  if(x1<0x65) y=x1; else y=@00d6;
  $  003:剩余电池电量           $    $  %            $    $  ANS003.BYTE004  $  if(x1<0x65) y=x1; else y=@00d6;
  $  004:电池组最高温度         $    $  degree C     $    $  ANS004.BYTE004  $  if(x1<0xC9) y=x1-40; else y=@00d6;
  $  005:充电是否允许           $    $               $    $  ANS005.BYTE004  $  if(x1==0x00) y=@002c; else if(x1==0x01) y=@002d; else y=@00d6;
  $  006:预充状态               $    $               $    $  ANS006.BYTE004  $  if(x1==0x00) y=@0112; else if(x1==0x01) y=@0113; else if(x1==0x02) y=@0114; else if(x1==0x03) y=@0115; else y=@00d6;
  $  007:放电主接触器状态       $    $               $    $  ANS007.BYTE004  $  if(x1==0x00) y=@002e; else if(x1==0x01) y=@002f; else y=@00d6;
  $  008:预充接触器状态         $    $               $    $  ANS008.BYTE004  $  if(x1==0x00) y=@002e; else if(x1==0x01) y=@002f; else y=@00d6;
  $  009:充电接触器状态         $    $               $    $  ANS009.BYTE004  $  if(x1==0x00) y=@002e; else if(x1==0x01) y=@002f; else y=@00d6;
  $  010:放电是否允许           $    $               $    $  ANS010.BYTE004  $  if(x1==0x00) y=@002c; else if(x1==0x01) y=@002d; else y=@00d6;
  $  011:最低电压电池号         $    $               $    $  ANS011.BYTE004  $  if(x1<0x65) y=x1; else y=@00d6;
  $  012:最低单节电池电压       $    $  V            $    $  ANS012.BYTE004  $  if((x2==0x00) && (x1<0x64)) y=@00fe; else if((x2==0x00) && (x1>=0x64) && (x1<0xC8)) y=@00ff; else if((x2==0x00) && (x1>=0xC8)) y=@0100;  else if((x2==0x01) && (x1<0x2C)) y=@0100; else if((x2==0x01) && (x1>=0x2C) && (x1<0x90)) y=@0116; else if((x2==0x01) && (x1>=0x90) && (x1<0xF4)) y=@0117; else y=@00d6;
  $  013:最高电压电池号         $    $               $    $  ANS013.BYTE004  $  if(x1<0x65) y=x1; else y=@00d6;
  $  014:最高单节电池电压       $    $  V            $    $  ANS014.BYTE004  $  if((x2==0x00) && (x1<0x64)) y=@00fe; else if((x2==0x00) && (x1>=0x64) && (x1<0xC8)) y=@00ff; else if((x2==0x00) && (x1>=0xC8)) y=@0100;  else if((x2==0x01) && (x1<0x2C)) y=@0100; else if((x2==0x01) && (x1>=0x2C) && (x1<0x90)) y=@0116; else if((x2==0x01) && (x1>=0x90) && (x1<0xF4)) y=@0117; else y=@00d6;
  $  015:最低温度电池号         $    $               $    $  ANS015.BYTE004  $  if(x1<0x65) y=x1; else y=@00d6;
  $  016:最低单节电池温度       $    $  degree C     $    $  ANS016.BYTE004  $  if(x1<0xC9) y=x1-40; else y=@00d6;
  $  017:最高温度电池号         $    $               $    $  ANS017.BYTE004  $  if(x1<0x65) y=x1; else y=@00d6;
  $  018:最高单节电池温度       $    $  degree C     $    $  ANS018.BYTE004  $  if(x1<0xC9) y=x1-40; else y=@00d6;
  $  019:电池组充电状态         $    $               $    $  ANS019.BYTE004  $  if((x1&0x03)==0x00) y=@0022; else if((x1&0x03)==0x01) y=@010d; else if((x1&0x03)==0x02) y=@010e;  else y=@00d6;
  $  020:电池组温度状态         $    $               $    $  ANS020.BYTE004  $  if(x1==0x01) y=@0022; else if(x1==0x02) y=@010b; else if(x1==0x03) y=@010c; else y=@00d6;
  $  021:电池组漏电状态         $    $               $    $  ANS021.BYTE004  $  if(x1==0x00) y=@0022; else if(x1==0x01) y=@0110; else if(x1==0x02) y=@0111; else y=@00d6;
  $  022:电池组电量状态         $    $               $    $  ANS022.BYTE004  $  if(x1==0x00) y=@0022; else if(x1==0x01) y=@010f; else y=@00d6;
  $  023:湿度状态               $    $               $    $  ANS023.BYTE004  $  if(x1==0x00) y=@0022; else if(x1==0x01) y=@010a; else y=@00d6;
  $  024:过流状态               $    $               $    $  ANS024.BYTE004  $  if(x1==0x00) y=@0022; else if(x1==0x01) y=@0118; else y=@00d6;
  $  025:电压过低状态           $    $               $    $  ANS025.BYTE004  $  if(x1==0x00) y=@0022; else if(x1==0x01) y=@010d; else if(x1==0x02) y=@010e; else y=@00d6;
  $  026:电压过高状态           $    $               $    $  ANS026.BYTE004  $  if(x1==0x00) y=@0022; else if(x1==0x01) y=@010d; else if(x1==0x02) y=@010e; else y=@00d6;

;******************************************************************************************************************************************************

30帧:

  $FC REQ000:781 30 00 00 00 00 00 00 00  $FC 

;******************************************************************************************************************************************************
